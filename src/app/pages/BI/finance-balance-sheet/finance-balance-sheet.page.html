<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start" class="ion-hide-sm-down_">
      <ion-button color="dark" class="ion-hide-sm-down">
        BẢNG CÂN ĐỐI CÔNG NỢ
      </ion-button>
    </ion-buttons>

    <ion-buttons slot="end">


      <ion-button (click)="refresh()" title="Tải lại">
        <ion-icon slot="icon-only" name="reload-outline"></ion-icon>
      </ion-button>

      <ion-button title="Chức năng mở rộng" (click)="pageConfig.isShowFeature = !pageConfig.isShowFeature;">
        <ion-icon slot="icon-only" [name]="pageConfig.isShowFeature? 'close-outline':'list-circle-outline'">
        </ion-icon>
      </ion-button>

    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content appScrollbarTheme>
  <ion-fab [hidden]="!pageConfig.isShowFeature" [ngClass]="{withSearch: pageConfig.isShowSearch}" class="feature"
    vertical="top" horizontal="end" slot="fixed">
    <div class="ion-padding">
      <div class="title">
        <form [formGroup]="formGroup">
          <div class="c-control">
            <div class="c-label"><b>BÁO CÁO HÀNG NGÀY</b></div>
          </div>

          <div class="c-control">
            <label class="c-label" for="CustomerCode">Khách hàng</label>
            <ng-select (change)="changeCustomerCodeFillter($event)" class="c-input" #CustomerCode
              formControlName="CustomerCode" labelForId="CustomerCode" [items]="contacts" [multiple]=true [closeOnSelect]=false bindLabel="Name"
              bindValue="Code" placeholder="Chọn khách hàng"></ng-select>
          </div>

          <div class="c-control">
            <label class="c-label" for="AccountCode">Account Code</label>
            <ng-select (change)="changeAccountCodeFillter($event)" class="c-input" #AccountCode
              formControlName="AccountCode" labelForId="AccountCode" [items]="accounts" [multiple]=false [closeOnSelect]=true bindLabel="Name"
              bindValue="Code" placeholder="Chọn account code"></ng-select>
          </div>

        </form>
      </div>

      <div class="c-control">
        <label class="c-label">Thời gian</label>
        <ion-button *ngIf="rpt.rptGlobal.query.frequency == 1" (click)="changeDateFillter('cm')"
          [fill]="rpt.rptGlobal.query.type=='cm'? 'solid': 'outline'" size="small">Tháng này</ion-button>
        <ion-button *ngIf="rpt.rptGlobal.query.frequency == 1" (click)="changeDateFillter('pm')"
          [fill]="rpt.rptGlobal.query.type=='pm'? 'solid': 'outline'" size="small">Tháng trước</ion-button>
        <ion-button (click)="changeDateFillter('set')" [fill]="rpt.rptGlobal.query.type=='set'? 'solid': 'outline'"
          size="small">Tùy chọn...</ion-button>

        <div *ngIf="rpt.rptGlobal.query.type=='set'" class="date-pick">
          <input (blur)="changeDateFillter('setdone')" [(ngModel)]="rpt.rptGlobal.query.fromDate" required type="date"
            pattern="\d{1,2}/\d{1,2}/\d{4}" class="datepicker" name="date" value="" />
          <input (blur)="changeDateFillter('setdone')" [(ngModel)]="rpt.rptGlobal.query.toDate" required type="date"
            pattern="\d{1,2}/\d{1,2}/\d{4}" class="datepicker" name="date" value="" />
        </div>
        <div class="query-time">{{rpt.rptGlobal.query.fromDate}} - {{rpt.rptGlobal.query.toDate}}</div>

        <label class="c-label">Chi nhánh</label>

        <ng-container *ngFor="let b of pageBranch">
          <ion-button [fill]="b.IsHidden ? 'outline' : 'solid'" size="small" (click)="toogleBranchDataset(b)">
            {{b.Name}}
          </ion-button>
        </ng-container>
      </div>
    </div>
  </ion-fab>
  <div class="main-view">
    <div class="row-1">
      <div class="chart-box" style="width: 100%;">
        <div class="title">BÁO CÁO HÀNG NGÀY: </div><!-- <b>In Hopitality - Tháng 11.2021</b> -->
        <div class="chart-contain" style="overflow-x: auto; height: 400px; overflow-y: auto;">
          <table class="data-table fix-height">
            <tr class="company-name">
              <td align="left" style="width: 100px">MÃ KH</td>
              <td align="right">TÊN KHÁCH HÀNG</td>
              <td align="right">NỢ ĐẦU KỲ</td>
              <td align="right">CÓ ĐẦU KỲ </td>
              <td align="right">PS NỢ</td>
              <td align="right">PS CÓ</td>
              <td align="right">NỢ CUỐI KỲ</td>
              <td align="right">CÓ CUỐI KỲ</td>
            </tr>
            <ng-container *ngFor="let i of dataDailyGeneral">

              <tr (click)="i.isShow=!i.isShow">
                <td class="data-code">
                  <div [ngClass]="{bold: i.data}" [innerHtml]="i.adate.substring(0, 10)">
                  </div>
                </td>
                <td [ngClass]="{bold: i.data}">

                  {{i.MaKH}}

                </td>
                <td>

                  {{i.TenKH}}

                </td>
                <td>

                  {{i.NoDauKy}}

                </td>
                <td>

                  {{i.CoDauKy}}

                </td>
                <td>

                  {{i.PSNo}}

                </td>
                <td>

                  {{i.PSCo}}

                </td>
                <td>

                  {{i.NoCuoiKy}}

                </td>
                <td>

                  {{i.CoCuoiKy}}

                </td>
              </tr>
            </ng-container>

          </table>
        </div>
      </div>
    </div>
  </div>

  <!-- <app-gantt-chart [ChartName]="GanttChartName"></app-gantt-chart> -->

  <app-xy-chart [ChartName]="XYChartName"></app-xy-chart>

  <app-pie-chart [ChartName]="PieChartName"></app-pie-chart>

  <app-funnel-chart [ChartName]="ConvertRateChart"></app-funnel-chart>

  <app-line-chart [ChartName]="LineChartName"></app-line-chart>

  <app-bar-chart [ChartName]="BarChartName"></app-bar-chart>

</ion-content>